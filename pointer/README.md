# ポインタと配列

C/C++において、初学者の鬼門となるのがポインタの概念である。モダンなC++においては、生のポインタを意識することはほとんどなくなったのだが、SIMD化など、低レイヤを考える場合には避けて通ることはできない。

また、個人的にはプログラムの動作を理解するのに、ポインタのようなものを先に理解してしまった方がいろいろ捗るのではないかと思う。

ここでは、C++(というかC言語)のポインタについて説明する。

## 変数とメモリ

Pythonの講義でも触れたが、変数というのはメモリにつけられたラベルである。我々がデータを扱う際、そのデータをメモリに置いて、それを操作する。コンピュータのメモリは、馬鹿でかい一次元配列のようなものだ。メモリには「アドレス」と呼ばれる連続の「番地」がふられている。コンピュータは、例えば「1+2」を計算する際、

* 「1」のデータをメモリに置く
* 「2」のデータをメモリに置く
* 「1」のデータをメモリから取ってきてレジスタに載せる
* 「2」のデータをメモリから取ってきてレジスタに載せる
* 足し算をする
* 結果である「3」をメモリに書き戻す

といった作業をする。さて、メモリからデータを取ってくるには、番地を指定する必要がある。なので、プログラマは「どの番地に、どんなデータを置いているか」を自分で覚えておかなければならない。

また、「1」のデータと「2」のデータは重なってはいけないが、隙間があいてもメモリがもったいない。なので「1」はどこに置いたか、データが何バイトあるかを考えて、「2」のデータをおかなければならない。

そんな面倒なことをいちいちやってられないので、コンピュータに任せたくなる。そこでメモリの「番地」にラベルを貼ることにしよう。このラベルが「変数」だ。




